<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name=viewport content="width=device-width, initial-scale=1">
        <title>DES-SN | summary | DES16X3dfk</title>
        
        <!-- Bootstrap -->
        <link rel=stylesheet href="/site_media/atc2/bootstrap-3.2.0-dist/css/bootstrap.min.css">
        
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <!-- ATC-wide CSS -->
        <link rel=stylesheet href="/site_media/atc2/atc/css/atc.css">


<style type="text/css">
.panel-heading span.placeholder:after {
    font-family: 'Glyphicons Halflings';
    content: "\e113";
    float: right;
    color: white;
}
.panel-heading span.placeholder.collapsed:after {
    content: "\e114";
}
</style>
    </head>

    <body>

        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">

            <div class="container-fluid">

                <!-- Brand and toggle get grouped for better mobile display -->

                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://www.darkenergysurvey.org">
                        Dark Energy Survey
                    </a>
                </div>

                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <form class="nav navbar-form navbar-right" role="search">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="&#171; jump to candidate &#187;" id=target_name>
                        </div>
                    </form>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/des-sn/">about</a></li>
                        <li><a href="/des-sn/transients/">transients</a></li>
                    </ul>
                </div>

            </div>

        </nav>


<div class=container>

    <div class="page-header">
        <h1><img src="/site_media/atc2/atc/assets/logo-atc.png"> DES16X3dfk</h1>
        <ul class="list-inline">
            <li><a href="/des-sn/finders/DES16X3dfk">finder chart</a></li>
            <li><a href="http://hla.stsci.edu/hlaview.html#Inventory|filterText%3D%24filterTypes%3D|query_string=36.573231%20-5.373161%20r%3D0.0005d&posfilename=&poslocalname=&posfilecount=&listdelimiter=whitespace&listformat=degrees&RA=36.573231&Dec=-5.373161&Radius=0.000500&inst-control=all&inst=ACS&inst=ACSGrism&inst=WFC3&inst=WFPC2&inst=NICMOS&inst=NICGRISM&inst=COS&inst=WFPC2-PC&inst=STIS&inst=FOS&inst=GHRS&imagetype=best&prop_id=&spectral_elt=&proprietary=both&preview=1&output_size=256&cutout_size=12.8|ra=&dec=&sr=&level=&image=&inst=ACS%2CACSGrism%2CWFC3%2CWFPC2%2CNICMOS%2CNICGRISM%2CCOS%2CSTIS%2CFOS%2CGHRS&ds=" target="_blank">HLA</a></li>
            <li><a href="http://ned.ipac.caltech.edu/cgi-bin/objsearch?search_type=Near+Position+Search&in_csys=Equatorial&in_equinox=J2000.0&lon=02:26:17.58&lat=-05:22:23.4&radius=1.0&hconst=73&omegam=0.27&omegav=0.73&corr_z=1&z_constraint=Unconstrained&z_value1=&z_value2=&z_unit=z&ot_include=ANY&nmp_op=ANY&out_csys=Equatorial&out_equinox=J2000.0&obj_sort=Distance+to+search+center&of=pre_text&zv_breaker=30000.0&list_limit=5&img_stamp=YES" target="_blank">NED</a></li>
            <li><a href="https://portal-auth.nersc.gov/atc2/web/targets/DES16X3dfk">ATC (internal)</a></li>
        </ul>
    </div>

    <div class=row>

        <div class="col-md-8">
            <div class=row>
                <div class="photometry-plot" id="photometry-plot" style="height: 450px; margin: 0 auto"></div>
            </div>
        </div>

        <div class="col-md-4 col-sm-6">
            <div class=display>
                <div class="display-header">
                    sexagesimal coordinates (J2000.0)
                </div>
                <div class="display-body">
                    <h3>
                    02:26:17.58
                    -05:22:23.4
                    </h3>
                </div>
            </div>
        </div>

        <div class="col-md-4 col-sm-6">
            <div class=display>
                <div class="display-header">
                    decimal coordinates (J2000.0)
                </div>
                <div class="display-body">
                    <h3>
                        36.573231
                        -5.373161
                    </h3>
                </div>
            </div>
        </div>


        <div class="col-md-4 col-sm-6">
            <div class=display>
                <div class="display-header">
                    astronomer's telegram                    
                </div>
                <div class="display-body">
                    <h3>
                        <a href="http://www.astronomerstelegram.org/?read=9855" target="_blank"><span class="glyphicon glyphicon-link"></span></a>
                        9855
                    </h3>
                </div>
            </div>
        </div>

    </div>

    <div class=row>
        <div id=stamps_display>
        </div>
    </div>

    <div class=row>
        <div class="col-md-12">
            <p><center><small>
                    Difference stamps labeled with UTC and MJD.
            &#9679; Display ordering is survey image, template, difference.
            &#9679; Stamps may not be available for all filter-epochs.
            </small></center></p>
        </div>
    </div>

</div>


        <div class=container>
            <div class=row>
                <hr>
                <div class="col-md-9">
                    <p class="text-justify">
                        <small>
                            We encourage observers to follow-up as many bright DES transients as they wish.
                            Peer-reviewed publications resulting from observations of transients advertised here should acknowledge DES and CTIO.
                            Details on how to do this are available <a href="/des-sn/">here.</a>
                            Contact <img src="/site_media/atc2/atc/assets/email.png">to report issues.
                        </small>
                    </p>
                </div>
                <div class="col-md-3">
                    <p class="text-right">
                        <a href="http://www.nersc.gov"><img src="/site_media/atc2/atc/assets/poweredbynersc.png"></a>
                        <a href="http://www.ncsa.illinois.edu/"><img src="http://www.ncsa.illinois.edu/assets/img/logos_ncsa.png" width=35></a>
                    </p>
                </div>
            </div>
        </div>


        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script type="text/javascript" src="/site_media/atc2/jquery-2.1.1.min.js"></script>

        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script type="text/javascript" src="/site_media/atc2/bootstrap-3.2.0-dist/js/bootstrap.min.js"></script>

        <!-- Make the target jump work. -->
        <script type="text/javascript">
            $( function() {
                $( "#target_name" ).keydown( function( event ) {
                    if( event.which == 13 ) {
                        window.location = "/des-sn/transients/" + $( "#target_name" ).val();
                        return false;
                    }
                } );
            } );
        </script>



<!-- Highcharts -->
<script type="text/javascript" src="/site_media/atc2/highcharts/highcharts.js"></script>
<script type="text/javascript" src="/site_media/atc2/highcharts/highcharts-more.js"></script>
<script type="text/javascript" src="/site_media/atc2/highcharts/modules/exporting.js"></script>

<!-- Core Select2 Libraries delivered via CDN -->

<script type="text/javascript">

// Define a custom symbol path
Highcharts.SVGRenderer.prototype.symbols.cross = function (x, y, w, h) {
    var xc = x + 0.5 * w;
    return [ 'M', xc, y, 'L', xc, y + h, 'M', xc - 0.5 * w, y + 0.66 * h, 'L', xc, y + h, 'M', xc + 0.5 * w, y + 0.66 * h, 'L', xc, y + h, 'z' ];
};
if (Highcharts.VMLRenderer) {
    Highcharts.VMLRenderer.prototype.symbols.cross = Highcharts.SVGRenderer.prototype.symbols.cross;
}

var options = {
    chart : {
        zoomType: "xy"
    },
//  credits : {
//      enabled: false
//  },
    exporting: {
        enabled: false
    },
    legend : {
        backgroundColor : "#F0F0F0",
        borderWidth     : 1,
        layout          : "horizontal",
        margin          : 6,
        verticalAlign   : "bottom",
    },
    plotOptions: {
        series : {
            animation      : false,
            showInLegend   : false,
            stickyTracking : false,
        }
    },
    title: {
        text: null
    },
    subtitle: {
        text: null
    },
    tooltip : {
        formatter : function() {
            var utc = new Date( this.x );
            var utc_year  = utc.getUTCFullYear();
            var utc_month = utc.getUTCMonth() + 1;
            var utc_day   = utc.getUTCDate();
            utc_month = utc_month < 10 ? "0" + utc_month : utc_month;
            utc_day   = utc_day   < 10 ? "0" + utc_day   : utc_day;
            return "MJD: " + ( 40587.0 + this.x / 86400000.0 ) + "<br/>" + 
                "UTC: " + utc_year + "-" + utc_month + "-" + utc_day + "<br/>" +
                this.series.name + ": " + Highcharts.numberFormat( this.y, 1 );
        },
    },
    xAxis: [ {
        title: {
            text: "UTC"
        },
        gridLineWidth: 1,
        type : "datetime",
        dateTimeLabelFormats: {
            day : "%Y-%m-%d",
            week : "%Y-%m-%d",
        },
        tickPosition: "inside",
    } ],
    yAxis: {
        title: {
            text: "Magnitude"
        },
        endOnTick: false,
        gridLineWidth: 1,
        reversed: true,
        tickPosition: "inside",
    },
    series: []
};

var bands = [
    { filter : "g", color : "#0000FF" },
    { filter : "r", color : "#228B22" }, //"#00FF00" },
    { filter : "i", color : "#FF0000" },
    { filter : "z", color : "#000000" }
];

var data = {"band": ["g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z"], "mag": [26.804659983211305, 24.975841708301552, 26.122717756180812, 26.365825212336933, 24.033663412273803, 21.047117770084277, 20.062420505792126, 19.943310595115683, 20.003806742408734, 20.246504057519843, 20.799138549973581, 21.672089980121612, 22.056808221853537, 22.511811682802342, 22.834813571727651, 23.048918668655091, 23.054929542887386, 23.067876045564116, 25.894407685194643, 25.596909942196419, 27.258420061104598, 25.086466535919268, 25.948124774755978, 26.7255520887988, 28.346201819782095, 25.49743450772198, 23.702892934283589, 20.968702594393658, 20.021945889766151, 19.868649885164942, 19.918150986976265, 20.06803543111473, 20.397650019290399, 20.748305593710064, 20.964128172093577, 21.197874492971955, 21.668348499323411, 21.915606592586222, 22.096879549168158, 28.066045803053978, 26.200922152550966, 29.223319812674692, 25.589073906083101, 26.912378905417519, 25.636005457535262, 26.021976630670778, 23.64789421197105, 21.046605213970857, 20.253639530385705, 20.183089533347793, 20.186964798753717, 20.322951821537309, 20.732331334619705, 20.83553174441202, 20.852683137534314, 20.906926312173468, 21.503891254241289, 21.865625479650468, 22.143948114451099, 22.536916721101285, 25.257183650803213, 27.04939849761065, 28.316341812851423, 25.999446975061907, 26.849702224921568, 24.147452931109889, 22.95661552621381, 21.045950633086029, 20.49779507767208, 20.485228862314507, 20.674013429795803, 20.872192797194781, 21.092900375287336, 21.026019514855495, 20.940378458321561, 21.14302976637331, 21.829491453451197, 22.133052526730417], "mag_error": [1.9082931123211586, 1.57280436820317, 1.5271944203107304, 1.3525195018777432, 0.16994054361268421, 0.025278399696929039, 0.0069725946179969829, 0.0062377276205594478, 0.0057657876788354693, 0.0095735095387738233, 0.016762601049389935, 0.051539168818485449, 0.03121500611818084, 0.049490244178349033, 0.074206161985333877, 0.076820210680844117, 0.11866296846661338, 0.13067778227702828, 1.8665645645170643, 2.8989088935525849, 6.4261120745274622, 0.97967278710559724, 1.9273319137505835, 5.3597817056565864, 30.844859238708466, 1.6742603342785376, 0.2090301094162805, 0.02203348935552233, 0.0092952154453619217, 0.010719793132748396, 0.010293500158807714, 0.010508843569487289, 0.033890792181753907, 0.013817143354414422, 0.015164368966572968, 0.023860474982678129, 0.078380352023099772, 0.032426307201065901, 0.074263877051723257, 18.983742406511727, 3.7840786389801999, 59.328164467540404, 1.3802108162574915, 6.6473774156630956, 2.3978373006083396, 3.6499193410921662, 0.30256290605120406, 0.024137118915626934, 0.018480295273429325, 0.015197119648285885, 0.011616775071139566, 0.015850921178107737, 0.018559032167707521, 0.017004913789387826, 0.019416380852701524, 0.023555073746424116, 0.063580788497902052, 0.057879902790420407, 0.08470948128759126, 0.2817542570527552, 1.1646873300150982, 4.4248195381182143, 17.568256354669909, 1.2094901243082765, 4.8561075796925648, 0.60537628599469429, 0.12644491644528152, 0.018721630393725118, 0.012181903890441513, 0.01541589238569493, 0.01930114657048353, 0.01921663865084592, 0.016660967574848317, 0.013045985893490512, 0.019648216339423177, 0.022675169882504863, 0.030008802544582162, 0.069593669634136379], "mjd": [57642.311000000002, 57645.275999999998, 57653.184999999998, 57657.264999999999, 57694.074999999997, 57701.086000000003, 57709.050999999999, 57714.197, 57718.082999999999, 57723.036999999997, 57730.07, 57739.163999999997, 57744.074999999997, 57750.067999999999, 57756.091999999997, 57770.042000000001, 57778.044000000002, 57782.044999999998, 57636.252, 57645.288999999997, 57655.177000000003, 57660.358, 57664.146000000001, 57671.116999999998, 57681.203999999998, 57686.131000000001, 57694.091, 57701.099999999999, 57709.067000000003, 57715.046999999999, 57720.205000000002, 57725.042000000001, 57730.186000000002, 57740.072, 57747.072999999997, 57752.091, 57763.053999999996, 57773.078999999998, 57781.065000000002, 57637.254000000001, 57643.241000000002, 57645.357000000004, 57655.197, 57669.129999999997, 57681.290000000001, 57686.266000000003, 57694.106, 57701.106, 57708.125, 57714.076000000001, 57718.173000000003, 57723.044000000002, 57730.086000000003, 57740.091999999997, 57747.093000000001, 57752.114000000001, 57762.063000000002, 57772.053999999996, 57780.069000000003, 57791.038, 57636.271999999997, 57642.349999999999, 57645.317999999999, 57671.139999999999, 57681.252999999997, 57687.112999999998, 57695.124000000003, 57702.052000000003, 57709.129000000001, 57715.082000000002, 57721.105000000003, 57725.116000000002, 57739.07, 57744.084999999999, 57750.084999999999, 57757.048999999999, 57771.040000000001, 57779.063999999998], "snr": [0.56895672774162587, 0.69031866054550362, 0.71093515685921671, 0.8027508684723359, 6.3889180396683809, 42.951144762934923, 155.71480406386067, 174.05957278088911, 188.30665734424309, 113.41046879002647, 64.771344349190031, 21.06623427672956, 34.782508151608354, 21.938388520481716, 14.631348336984665, 14.133470803261787, 9.1497475479353838, 8.3084988575673897, 0.58167621168734751, 0.37453271028037388, 0.16895693572819737, 1.1082641255820653, 0.56333639110727396, 0.20257097478657934, 0.035199907911902382, 0.64848708562756974, 5.1941617778896205, 49.276634637355237, 116.80592140549946, 101.2833168805528, 105.47784407708107, 103.31643035496253, 32.036318270030499, 78.578920179709158, 71.597849350107012, 45.503545321136144, 13.852147594822592, 33.483189992181394, 14.619977408423431, 0.057192948656198825, 0.28692220969560311, 0.018300519062108469, 0.7866451935959724, 0.16333301644643025, 0.4527981129006019, 0.29746854746473506, 3.5884643591253238, 44.982013327829215, 58.751020408163264, 71.443551797040172, 93.462789639054492, 68.49672599833994, 58.501768569984847, 63.848380427291531, 55.918567574196715, 46.093517534537725, 17.076482226922288, 18.758431725248641, 12.817174515235457, 3.8534864250687719, 0.93221260056469801, 0.24537412100197672, 0.0618010224144711, 0.89768091771652647, 0.22358157988478217, 1.7934898176167497, 8.5866338899276915, 57.993678003708098, 89.126971820065691, 70.429669434228202, 56.252420072209716, 56.499798142914813, 65.166455662345527, 83.223775774575515, 55.258766801119414, 47.882164075685026, 36.180590783158387, 15.601077087413211], "stamps": [null, null, null, null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161101-r2703/D_SN-X3_g_s1/p03/ccd58/stamps/REPLACE14014930.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161108-r2714/D_SN-X3_g_s1/p01/ccd58/stamps/REPLACE14109198.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161116-r2725/D_SN-X3_g_s1/p01/ccd58/stamps/REPLACE14359506.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161121-r2730/D_SN-X3_g_s1/p01/ccd58/stamps/REPLACE14476132.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161125-r2738/D_SN-X3_g_s1/p01/ccd58/stamps/REPLACE14584647.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161130-r2753/D_SN-X3_g_s1/p01/ccd58/stamps/REPLACE14761939.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161207-r2765/D_SN-X3_g_s1/p03/ccd58/stamps/REPLACE14879976.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161216-r2772/D_SN-X3_g_s1/p01/ccd58/stamps/REPLACE14987128.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161221-r2785/D_SN-X3_g_s1/p03/ccd58/stamps/REPLACE15085691.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161227-r2792/D_SN-X3_g_s1/p01/ccd58/stamps/REPLACE15252140.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20170102-r2799/D_SN-X3_g_s1/p01/ccd58/stamps/REPLACE15344213.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20170116-r2819/D_SN-X3_g_s1/p01/ccd58/stamps/REPLACE15488278.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20170124-r2833/D_SN-X3_g_s1/p01/ccd58/stamps/REPLACE15647138.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20170128-r2842/D_SN-X3_g_s1/p01/ccd58/stamps/REPLACE15739693.gif", null, null, null, null, null, null, null, null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161101-r2703/D_SN-X3_r_s1/p03/ccd58/stamps/REPLACE14025149.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161108-r2714/D_SN-X3_r_s1/p01/ccd58/stamps/REPLACE14108337.gif", null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161122-r2732/D_SN-X3_r_s1/p01/ccd58/stamps/REPLACE14500829.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161127-r2742/D_SN-X3_r_s1/p01/ccd58/stamps/REPLACE14671668.gif", null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161207-r2765/D_SN-X3_r_s1/p02/ccd58/stamps/REPLACE14879740.gif", null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161224-r2790/D_SN-X3_r_s1/p01/ccd58/stamps/REPLACE15202454.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161229-r2796/D_SN-X3_r_s1/p01/ccd58/stamps/REPLACE15304124.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20170109-r2816/D_SN-X3_r_s1/p01/ccd58/stamps/REPLACE15458406.gif", null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20170127-r2840/D_SN-X3_r_s1/p01/ccd58/stamps/REPLACE15725819.gif", null, null, null, null, null, null, null, null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161108-r2714/D_SN-X3_i_s1/p02/ccd58/stamps/REPLACE14147319.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161115-r2722/D_SN-X3_i_s1/p01/ccd58/stamps/REPLACE14276370.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161121-r2730/D_SN-X3_i_s1/p01/ccd58/stamps/REPLACE14441541.gif", null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161130-r2753/D_SN-X3_i_s1/p01/ccd58/stamps/REPLACE14764653.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161207-r2765/D_SN-X3_i_s1/p02/ccd58/stamps/REPLACE14891947.gif", null, null, null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20170108-r2814/D_SN-X3_i_s1/p01/ccd58/stamps/REPLACE15443665.gif", null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20170126-r2838/D_SN-X3_i_s1/p01/ccd58/stamps/REPLACE15702788.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20170206-r2853/D_SN-X3_i_s1/p01/ccd58/stamps/REPLACE15814458.gif", null, null, null, null, null, null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161102-r2706/D_SN-X3_z_s1/p01/ccd58/stamps/REPLACE14057862.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161109-r2716/D_SN-X3_z_s1/p02/ccd58/stamps/REPLACE14179729.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161116-r2725/D_SN-X3_z_s1/p01/ccd58/stamps/REPLACE14392846.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161122-r2732/D_SN-X3_z_s1/p01/ccd58/stamps/REPLACE14512804.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161128-r2746/D_SN-X3_z_s1/p01/ccd58/stamps/REPLACE14686768.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161202-r2758/D_SN-X3_z_s1/p01/ccd58/stamps/REPLACE14793856.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161216-r2772/D_SN-X3_z_s1/p01/ccd58/stamps/REPLACE14953079.gif", null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20161227-r2792/D_SN-X3_z_s1/p01/ccd58/stamps/REPLACE15268555.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20170103-r2802/D_SN-X3_z_s1/p01/ccd58/stamps/REPLACE15383793.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20170117-r2823/D_SN-X3_z_s1/p01/ccd58/stamps/REPLACE15555695.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20170125-r2836/D_SN-X3_z_s1/p01/ccd58/stamps/REPLACE15681783.gif"]};

var ymin = null;
var ymax = null;
for( var i = 0; i < bands.length; i ++ ) {
    var filter = bands[ i ].filter;
    var color  = bands[ i ].color;
    var series_data  = [];
    var series_error = [];
    for( var pos = 0; pos < data.mjd.length; pos ++ ) {
        if( data.band[ pos ] != filter ) continue;
        var utc_ms = ( data.mjd[ pos ] - 40587.0 ) * 86400000.0;
        if( data.snr[ pos ] > 3.0 )
        {
            series_data.push( { x : utc_ms, y : data.mag[ pos ] } );
            series_error.push( { x : utc_ms, low : data.mag[ pos ] - data.mag_error[ pos ], high : data.mag[ pos ] + data.mag_error[ pos ] } );
        }
        else
        {
            series_data.push( { x : utc_ms, y : data.mag[ pos ], marker : { symbol : "cross", lineColor : color, lineWidth : 2, radius : 5 } } );
        }
        if( ymin === null || data.mag[ pos ] < ymin ) ymin = data.mag[ pos ];
        if( ymax === null || data.mag[ pos ] > ymax ) ymax = data.mag[ pos ];
    }
    options.series.push( {
        color : color       ,
        data  : series_data ,
        name  : filter      ,
        type  : "scatter"   ,
        zIndex : 1000,
        showInLegend : true,
    } );
    options.series.push( {
        color : color       ,
        data  : series_error,
        enableMouseTracking : false,
        lineWidth : 2,
        name  : filter      ,
        type  : "errorbar"  ,
        whiskerLength : 0,
    } );
}

options.yAxis.min = ymin - 0.1;
options.yAxis.max = ymax + 0.1;

$( "#photometry-plot" ).highcharts( options );

// Stamps.

var stamp_data = [];
for( var i = 0; i < data.mjd.length; i++ ) {

    var stamps = data.stamps[ i ];
    if( ! stamps ) continue;

    var band = data.band[ i ];
    var mag  = data.mag[ i ];
    var dmag = data.mag_error[ i ];
    var snr  = data.snr[ i ];
    var mjd  = data.mjd[ i ];

    var utc = new Date( ( mjd - 40587.0 ) * 86400000.0 );
    var utc_year  = utc.getUTCFullYear();
    var utc_month = utc.getUTCMonth() + 1;
    var utc_day   = utc.getUTCDate() + ( utc.getUTCHours() * 60.0 + utc.getUTCMinutes() ) / 1440.0;
    utc_month = utc_month < 10 ? "0" + utc_month : utc_month;
    utc_day   = utc_day   < 10 ? "0" + utc_day.toFixed( 2 ) : utc_day.toFixed( 2 );

    stamp_data.push( {
        mjd  : mjd,
        utc  : utc_year + "-" + utc_month + "-" + utc_day,
        mag  : mag.toFixed( 2 ),
        dmag : dmag.toFixed( 2 ),
        snr  : snr.toFixed( 1 ),
        band : band,
        srch : stamps.replace( "https", "http" ).replace( "REPLACE", "srch" ),
        temp : stamps.replace( "https", "http" ).replace( "REPLACE", "temp" ),
        diff : stamps.replace( "https", "http" ).replace( "REPLACE", "diff" ),
    } );

}

stamp_data.sort( function( a, b ) {
    return a.mjd - b.mjd;                    
} );

var start = stamp_data[ 0 ].mjd;
for( var i = 0; i < stamp_data.length; i++ ) {
    stamp_data[ i ].day = Math.round( stamp_data[ i ].mjd - start );
}

var stamp_map = {};
for( var i = 0; i < stamp_data.length; i++ ) {
    var entry = stamp_data[ i ];
    if( ! ( entry.day in stamp_map ) ) stamp_map[ entry.day ] = {};
    for( var j = 0; j < bands.length; j++ ) {
        var band   = bands[ j ];
        var filter = band.filter;
        if( ! ( filter in stamp_map[ entry.day ] ) ) stamp_map[ entry.day ][ filter ] = null;
        if( entry.band == filter ) stamp_map[ entry.day ][ filter ] = entry;
    }
}

var stamp_days = [];
for( var key in stamp_map ) {
    if( stamp_map.hasOwnProperty( key ) ) stamp_days.push( key );
}
stamp_days.sort( function( a, b ) {
    return a - b;
} );

var html = "";
for( var i = 0; i < stamp_days.length; i++ ) {
    html += "<div class='col-md-12'><div class=row>";
    for( var j = 0; j < bands.length; j++ ) {
        var band   = bands[ j ];
        var filter = band.filter;
        var color  = band.color;
        var entry  = stamp_map[ stamp_days[ i ] ][ filter ];
        html += "<div class='col-lg-3 col-md-3 col-sm-3'>";
        html += "<div class=display style='color: " + color + ";'>";
        if( entry ) {
            html += "<div class='display-header'><small>";
            html += entry.utc + " &bull; " + entry.mjd.toFixed( 2 );
            html += "</small></div>";
            html += "<div class='display-body'>";
            html += "<img src='" + entry.srch + "' width=60 height=60'>";
            html += "<img src='" + entry.temp + "' width=60 height=60'>";
            html += "<img src='" + entry.diff + "' width=60 height=60'>";
            html += "</div>";
            html += "<div class='display-footer'><small>";
            html += filter + " = " + entry.mag + " &plusmn " + entry.dmag + " &bull; ";
            html += "S/N = " + entry.snr;
            html += "</small></div>";
        }
        html += "</div>";
        html += "</div>";
    }
    html += "</div>";
    html += "</div>";
}

$( "#stamps_display" ).html( html );

</script>

        
    </body>

</html>