<!DOCTYPE html>
<html lang="en">

    <head>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name=viewport content="width=device-width, initial-scale=1">
        <title>DES-SN | summary | DES17C1cpv</title>
        
        <!-- Bootstrap -->
        <link rel=stylesheet href="/site_media/atc2/bootstrap-3.2.0-dist/css/bootstrap.min.css">
        
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

        <!-- ATC-wide CSS -->
        <link rel=stylesheet href="/site_media/atc2/atc/css/atc.css">


<style type="text/css">
.panel-heading span.placeholder:after {
    font-family: 'Glyphicons Halflings';
    content: "\e113";
    float: right;
    color: white;
}
.panel-heading span.placeholder.collapsed:after {
    content: "\e114";
}
</style>
    </head>

    <body>

        <nav class="navbar navbar-default navbar-fixed-top" role="navigation">

            <div class="container-fluid">

                <!-- Brand and toggle get grouped for better mobile display -->

                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="http://www.darkenergysurvey.org">
                        Dark Energy Survey
                    </a>
                </div>

                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                    <form class="nav navbar-form navbar-right" role="search">
                        <div class="input-group">
                            <input type="text" class="form-control" placeholder="&#171; jump to candidate &#187;" id=target_name>
                        </div>
                    </form>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/des-sn/">about</a></li>
                        <li><a href="/des-sn/transients/">transients</a></li>
                    </ul>
                </div>

            </div>

        </nav>


<div class=container>

    <div class="page-header">
        <h1><img src="/site_media/atc2/atc/assets/logo-atc.png"> DES17C1cpv</h1>
        <ul class="list-inline">
            <li><a href="/des-sn/finders/DES17C1cpv">finder chart</a></li>
            <li><a href="http://hla.stsci.edu/hlaview.html#Inventory|filterText%3D%24filterTypes%3D|query_string=55.303776%20-26.875044%20r%3D0.0005d&posfilename=&poslocalname=&posfilecount=&listdelimiter=whitespace&listformat=degrees&RA=55.303776&Dec=-26.875044&Radius=0.000500&inst-control=all&inst=ACS&inst=ACSGrism&inst=WFC3&inst=WFPC2&inst=NICMOS&inst=NICGRISM&inst=COS&inst=WFPC2-PC&inst=STIS&inst=FOS&inst=GHRS&imagetype=best&prop_id=&spectral_elt=&proprietary=both&preview=1&output_size=256&cutout_size=12.8|ra=&dec=&sr=&level=&image=&inst=ACS%2CACSGrism%2CWFC3%2CWFPC2%2CNICMOS%2CNICGRISM%2CCOS%2CSTIS%2CFOS%2CGHRS&ds=" target="_blank">HLA</a></li>
            <li><a href="http://ned.ipac.caltech.edu/cgi-bin/objsearch?search_type=Near+Position+Search&in_csys=Equatorial&in_equinox=J2000.0&lon=03:41:12.91&lat=-26:52:30.2&radius=1.0&hconst=73&omegam=0.27&omegav=0.73&corr_z=1&z_constraint=Unconstrained&z_value1=&z_value2=&z_unit=z&ot_include=ANY&nmp_op=ANY&out_csys=Equatorial&out_equinox=J2000.0&obj_sort=Distance+to+search+center&of=pre_text&zv_breaker=30000.0&list_limit=5&img_stamp=YES" target="_blank">NED</a></li>
            <li><a href="https://portal-auth.nersc.gov/atc2/web/targets/DES17C1cpv">ATC (internal)</a></li>
        </ul>
    </div>

    <div class=row>

        <div class="col-md-8">
            <div class=row>
                <div class="photometry-plot" id="photometry-plot" style="height: 450px; margin: 0 auto"></div>
            </div>
        </div>

        <div class="col-md-4 col-sm-6">
            <div class=display>
                <div class="display-header">
                    sexagesimal coordinates (J2000.0)
                </div>
                <div class="display-body">
                    <h3>
                    03:41:12.91
                    -26:52:30.2
                    </h3>
                </div>
            </div>
        </div>

        <div class="col-md-4 col-sm-6">
            <div class=display>
                <div class="display-header">
                    decimal coordinates (J2000.0)
                </div>
                <div class="display-body">
                    <h3>
                        55.303776
                        -26.875044
                    </h3>
                </div>
            </div>
        </div>


        <div class="col-md-4 col-sm-6">
            <div class=display>
                <div class="display-header">
                    astronomer's telegram                    
                </div>
                <div class="display-body">
                    <h3>
                        <a href="http://www.astronomerstelegram.org/?read=11148" target="_blank"><span class="glyphicon glyphicon-link"></span></a>
                        11148
                    </h3>
                </div>
            </div>
        </div>

    </div>

    <div class=row>
        <div id=stamps_display>
        </div>
    </div>

    <div class=row>
        <div class="col-md-12">
            <p><center><small>
                    Difference stamps labeled with UTC and MJD.
            &#9679; Display ordering is survey image, template, difference.
            &#9679; Stamps may not be available for all filter-epochs.
            </small></center></p>
        </div>
    </div>

</div>


        <div class=container>
            <div class=row>
                <hr>
                <div class="col-md-9">
                    <p class="text-justify">
                        <small>
                            We encourage observers to follow-up as many bright DES transients as they wish.
                            Peer-reviewed publications resulting from observations of transients advertised here should acknowledge DES and CTIO.
                            Details on how to do this are available <a href="/des-sn/">here.</a>
                            Contact <img src="/site_media/atc2/atc/assets/email.png">to report issues.
                        </small>
                    </p>
                </div>
                <div class="col-md-3">
                    <p class="text-right">
                        <a href="http://www.nersc.gov"><img src="/site_media/atc2/atc/assets/poweredbynersc.png"></a>
                        <a href="http://www.ncsa.illinois.edu/"><img src="http://www.ncsa.illinois.edu/assets/img/logos_ncsa.png" width=35></a>
                    </p>
                </div>
            </div>
        </div>


        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script type="text/javascript" src="/site_media/atc2/jquery-2.1.1.min.js"></script>

        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script type="text/javascript" src="/site_media/atc2/bootstrap-3.2.0-dist/js/bootstrap.min.js"></script>

        <!-- Make the target jump work. -->
        <script type="text/javascript">
            $( function() {
                $( "#target_name" ).keydown( function( event ) {
                    if( event.which == 13 ) {
                        window.location = "/des-sn/transients/" + $( "#target_name" ).val();
                        return false;
                    }
                } );
            } );
        </script>



<!-- Highcharts -->
<script type="text/javascript" src="/site_media/atc2/highcharts/highcharts.js"></script>
<script type="text/javascript" src="/site_media/atc2/highcharts/highcharts-more.js"></script>
<script type="text/javascript" src="/site_media/atc2/highcharts/modules/exporting.js"></script>

<!-- Core Select2 Libraries delivered via CDN -->

<script type="text/javascript">

// Define a custom symbol path
Highcharts.SVGRenderer.prototype.symbols.cross = function (x, y, w, h) {
    var xc = x + 0.5 * w;
    return [ 'M', xc, y, 'L', xc, y + h, 'M', xc - 0.5 * w, y + 0.66 * h, 'L', xc, y + h, 'M', xc + 0.5 * w, y + 0.66 * h, 'L', xc, y + h, 'z' ];
};
if (Highcharts.VMLRenderer) {
    Highcharts.VMLRenderer.prototype.symbols.cross = Highcharts.SVGRenderer.prototype.symbols.cross;
}

var options = {
    chart : {
        zoomType: "xy"
    },
//  credits : {
//      enabled: false
//  },
    exporting: {
        enabled: false
    },
    legend : {
        backgroundColor : "#F0F0F0",
        borderWidth     : 1,
        layout          : "horizontal",
        margin          : 6,
        verticalAlign   : "bottom",
    },
    plotOptions: {
        series : {
            animation      : false,
            showInLegend   : false,
            stickyTracking : false,
        }
    },
    title: {
        text: null
    },
    subtitle: {
        text: null
    },
    tooltip : {
        formatter : function() {
            var utc = new Date( this.x );
            var utc_year  = utc.getUTCFullYear();
            var utc_month = utc.getUTCMonth() + 1;
            var utc_day   = utc.getUTCDate();
            utc_month = utc_month < 10 ? "0" + utc_month : utc_month;
            utc_day   = utc_day   < 10 ? "0" + utc_day   : utc_day;
            return "MJD: " + ( 40587.0 + this.x / 86400000.0 ) + "<br/>" + 
                "UTC: " + utc_year + "-" + utc_month + "-" + utc_day + "<br/>" +
                this.series.name + ": " + Highcharts.numberFormat( this.y, 1 );
        },
    },
    xAxis: [ {
        title: {
            text: "UTC"
        },
        gridLineWidth: 1,
        type : "datetime",
        dateTimeLabelFormats: {
            day : "%Y-%m-%d",
            week : "%Y-%m-%d",
        },
        tickPosition: "inside",
    } ],
    yAxis: {
        title: {
            text: "Magnitude"
        },
        endOnTick: false,
        gridLineWidth: 1,
        reversed: true,
        tickPosition: "inside",
    },
    series: []
};

var bands = [
    { filter : "g", color : "#0000FF" },
    { filter : "r", color : "#228B22" }, //"#00FF00" },
    { filter : "i", color : "#FF0000" },
    { filter : "z", color : "#000000" }
];

var data = {"band": ["g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "g", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "r", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "i", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z", "z"], "mag": [25.541205785481374, 24.712222411239132, 21.087418119609811, 20.502286468283614, 20.36587612849064, 20.601378115104527, 21.216389965946384, 21.810800424743242, 22.31076770449549, 23.065351119058285, 23.58724077934621, 24.606962694022123, 23.532800659606441, 23.919541689013265, 24.180785476147438, 25.641715651922183, 26.634362126596535, 24.339490719901917, 21.229214496059551, 20.619014478986593, 20.326862013815177, 20.392214063364733, 20.826080252407607, 21.070407777380375, 21.302177903750106, 21.72183417427971, 22.333998810110927, 22.591179707159135, 22.772885990673835, 22.808387513230024, 22.901886401081832, 22.966931821295191, 26.760862376418537, 24.704007470121063, 21.260584289018311, 20.830014210050251, 20.666244480621742, 20.705594971612033, 21.155578152073435, 21.385289242707721, 21.381290924701595, 21.593087183611434, 22.176984105631178, 22.55563384427084, 22.823624484329795, 23.024234300136825, 23.271522599029893, 23.332068318802829, 24.687110426048676, 24.036520614461534, 21.420023435534649, 21.186901940675639, 21.109243748081781, 21.376651184562583, 21.866897365568374, 21.806320787392934, 21.611706503038601, 21.584503131575683, 22.085109531992533, 22.589610306156263, 22.864553829892753, 22.899421012604726, 23.077018405507559, 23.137859932396204], "mag_error": [1.1678465021383495, 0.35925499230857599, 0.024058762673946719, 0.011272943302201801, 0.03094238685288114, 0.011815747975568973, 0.018782766989509217, 0.037374048875968652, 0.22769084858519775, 0.075805988509286673, 0.13829933228531635, 1.5651777178187101, 0.32263449899585284, 0.18875859662700112, 0.4589183214384181, 2.7110563436913155, 4.1990279046644883, 0.38779585234386516, 0.029946163374147256, 0.014755605292607299, 0.033613456282381368, 0.013078975802757228, 0.019814505659887054, 0.028836566949883832, 0.067242947669183595, 0.034437938418245113, 0.062553761498303065, 0.18665759082725272, 0.13036624016887913, 0.097601445077142635, 0.1387468463390433, 0.28293871211362637, 5.9151022757957827, 0.64442337324440369, 0.037489033024810492, 0.020829027521926766, 0.029310345104252216, 0.021801647872448773, 0.03320534833081594, 0.055340734270750709, 0.051529944638229776, 0.042451320193238801, 0.060041655609877342, 0.13605272898947982, 0.12833848083107308, 0.1436357400097262, 0.22830622707969866, 0.36501951209245226, 0.99132436086611819, 0.3765521624168357, 0.042294683400707779, 0.031170007582638513, 0.052287246060810255, 0.04307295046345104, 0.064401198079731201, 0.094428788585277354, 0.054274833268785461, 0.045666986138765964, 0.059625840599232441, 0.12286725660396304, 0.12330903496448603, 0.14348752134508658, 0.18060628328880909, 0.29034632078943645], "mjd": [58040.362000000001, 58046.148000000001, 58053.118000000002, 58057.311999999998, 58064.317000000003, 58071.305, 58079.133000000002, 58084.300000000003, 58092.175000000003, 58099.084999999999, 58108.048000000003, 58117.159, 58124.186000000002, 58132.112999999998, 58139.040000000001, 58036.362999999998, 58040.364999999998, 58046.150000000001, 58053.120000000003, 58057.315000000002, 58064.319000000003, 58071.307000000001, 58079.135000000002, 58084.302000000003, 58092.178, 58099.088000000003, 58108.050000000003, 58117.161999999997, 58124.188000000002, 58132.116000000002, 58139.042999999998, 58143.084999999999, 58040.366999999998, 58046.152000000002, 58053.122000000003, 58057.317000000003, 58064.321000000004, 58071.309000000001, 58079.137000000002, 58084.303999999996, 58092.18, 58099.089999999997, 58108.052000000003, 58117.163999999997, 58124.190999999999, 58132.118000000002, 58139.044999999998, 58143.087, 58040.372000000003, 58046.154999999999, 58053.125, 58057.319000000003, 58064.326999999997, 58071.311999999998, 58079.142, 58084.309000000001, 58092.182999999997, 58099.091999999997, 58108.055, 58117.165999999997, 58124.192999999999, 58132.123, 58139.050000000003, 58143.089], "snr": [0.92969084787266609, 3.0221882172915069, 45.128513858855904, 96.313462744558151, 35.088960975130242, 91.888910207214124, 57.804912628929934, 29.0505374026054, 4.7684665918923255, 14.322565091610414, 7.8506250667806396, 0.69368238021638329, 3.3652204216762502, 5.7519828191116122, 2.3658593567479169, 0.40048455919577636, 0.25856846618047952, 2.7997622929586905, 36.25627066789643, 73.581271877887232, 32.300641613198898, 83.013855299681907, 54.795018528073548, 37.651368370065398, 16.146469516768455, 31.52732871439569, 17.356849192635405, 5.8167267666223816, 8.3283540535620588, 11.124181654277566, 7.8253036620739671, 3.8373547283346112, 0.18355324289165581, 1.6848181643255726, 28.961435309349856, 52.126111198190728, 37.042764283270614, 49.800648607401754, 32.697630331753551, 19.619114546732256, 21.07000526355365, 25.576029198051984, 18.083049072009885, 7.9802603947921043, 8.4599427835462802, 7.5589557632704061, 4.7556136275648466, 2.9744607309735649, 1.0952380952380953, 2.8833620229120909, 25.670749074337795, 34.832721868276913, 20.764838207302301, 25.206915084199213, 16.85894419873906, 11.497936392328235, 20.004413452202311, 23.77507903540991, 18.209155524628461, 8.8366602687140112, 8.8050012318305004, 7.5667639567551026, 6.0116192249076912, 3.7394522575869726], "stamps": [null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171019-r3161/D_SN-C1_g_s1/p01/ccd24/stamps/REPLACE18937395.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171026-r3172/D_SN-C1_g_s1/p01/ccd24/stamps/REPLACE19111403.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171030-r3180/D_SN-C1_g_s1/p01/ccd24/stamps/REPLACE19243669.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171106-r3186/D_SN-C1_g_s1/p05/ccd24/stamps/REPLACE20391604.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171113-r3197/D_SN-C1_g_s1/p01/ccd24/stamps/REPLACE20365032.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171121-r3209/D_SN-C1_g_s1/p01/ccd24/stamps/REPLACE20923585.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171126-r3217/D_SN-C1_g_s1/p01/ccd24/stamps/REPLACE21081272.gif", null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171211-r3239/D_SN-C1_g_s1/p01/ccd24/stamps/REPLACE21435993.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171220-r3249/D_SN-C1_g_s1/p01/ccd24/stamps/REPLACE21639354.gif", null, null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20180113-r3289/D_SN-C1_g_s1/p01/ccd24/stamps/REPLACE22265691.gif", null, null, null, null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171026-r3172/D_SN-C1_r_s1/p01/ccd24/stamps/REPLACE19105568.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171030-r3180/D_SN-C1_r_s1/p01/ccd24/stamps/REPLACE19253204.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171106-r3186/D_SN-C1_r_s1/p08/ccd24/stamps/REPLACE20404542.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171113-r3197/D_SN-C1_r_s1/p01/ccd24/stamps/REPLACE20369756.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171121-r3209/D_SN-C1_r_s1/p01/ccd24/stamps/REPLACE20927789.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171126-r3217/D_SN-C1_r_s1/p01/ccd24/stamps/REPLACE21081759.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171204-r3224/D_SN-C1_r_s1/p01/ccd24/stamps/REPLACE21208741.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171211-r3239/D_SN-C1_r_s1/p01/ccd24/stamps/REPLACE21442692.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171220-r3249/D_SN-C1_r_s1/p01/ccd24/stamps/REPLACE21639974.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171229-r3259/D_SN-C1_r_s1/p01/ccd24/stamps/REPLACE21884018.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20180105-r3268/D_SN-C1_r_s1/p01/ccd24/stamps/REPLACE22066708.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20180113-r3289/D_SN-C1_r_s1/p01/ccd24/stamps/REPLACE22268081.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20180120-r3304/D_SN-C1_r_s1/p01/ccd24/stamps/REPLACE22440486.gif", null, null, null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171026-r3172/D_SN-C1_i_s1/p01/ccd24/stamps/REPLACE19109610.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171030-r3180/D_SN-C1_i_s1/p01/ccd24/stamps/REPLACE19249658.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171106-r3185/D_SN-C1_i_s1/p01/ccd24/stamps/REPLACE19461190.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171113-r3197/D_SN-C1_i_s1/p01/ccd24/stamps/REPLACE20361951.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171121-r3209/D_SN-C1_i_s1/p01/ccd24/stamps/REPLACE20924015.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171126-r3217/D_SN-C1_i_s1/p01/ccd24/stamps/REPLACE21085476.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171204-r3224/D_SN-C1_i_s1/p01/ccd24/stamps/REPLACE21200389.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171211-r3239/D_SN-C1_i_s1/p01/ccd24/stamps/REPLACE21434861.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171220-r3249/D_SN-C1_i_s1/p01/ccd24/stamps/REPLACE21629760.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171229-r3259/D_SN-C1_i_s1/p01/ccd24/stamps/REPLACE21872690.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20180105-r3268/D_SN-C1_i_s1/p01/ccd24/stamps/REPLACE22064295.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20180113-r3289/D_SN-C1_i_s1/p01/ccd24/stamps/REPLACE22271926.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20180120-r3304/D_SN-C1_i_s1/p03/ccd24/stamps/REPLACE22441323.gif", null, null, null, "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171026-r3172/D_SN-C1_z_s1/p01/ccd24/stamps/REPLACE19116438.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171030-r3180/D_SN-C1_z_s1/p01/ccd24/stamps/REPLACE19289373.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171106-r3185/D_SN-C1_z_s1/p01/ccd24/stamps/REPLACE19485550.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171113-r3197/D_SN-C1_z_s1/p01/ccd24/stamps/REPLACE20372890.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171121-r3209/D_SN-C1_z_s1/p01/ccd24/stamps/REPLACE20930784.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171126-r3217/D_SN-C1_z_s1/p01/ccd24/stamps/REPLACE21088393.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171204-r3224/D_SN-C1_z_s1/p01/ccd24/stamps/REPLACE21211516.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171211-r3239/D_SN-C1_z_s1/p01/ccd24/stamps/REPLACE21445557.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171220-r3249/D_SN-C1_z_s1/p01/ccd24/stamps/REPLACE21657163.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20171229-r3259/D_SN-C1_z_s1/p01/ccd24/stamps/REPLACE21899605.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20180105-r3268/D_SN-C1_z_s1/p01/ccd24/stamps/REPLACE22072458.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20180113-r3289/D_SN-C1_z_s1/p01/ccd24/stamps/REPLACE22256327.gif", "http://dessne.cosmology.illinois.edu/SNWG/stamps/stamps/20180120-r3304/D_SN-C1_z_s1/p03/ccd24/stamps/REPLACE22445985.gif", null]};

var ymin = null;
var ymax = null;
for( var i = 0; i < bands.length; i ++ ) {
    var filter = bands[ i ].filter;
    var color  = bands[ i ].color;
    var series_data  = [];
    var series_error = [];
    for( var pos = 0; pos < data.mjd.length; pos ++ ) {
        if( data.band[ pos ] != filter ) continue;
        var utc_ms = ( data.mjd[ pos ] - 40587.0 ) * 86400000.0;
        if( data.snr[ pos ] > 3.0 )
        {
            series_data.push( { x : utc_ms, y : data.mag[ pos ] } );
            series_error.push( { x : utc_ms, low : data.mag[ pos ] - data.mag_error[ pos ], high : data.mag[ pos ] + data.mag_error[ pos ] } );
        }
        else
        {
            series_data.push( { x : utc_ms, y : data.mag[ pos ], marker : { symbol : "cross", lineColor : color, lineWidth : 2, radius : 5 } } );
        }
        if( ymin === null || data.mag[ pos ] < ymin ) ymin = data.mag[ pos ];
        if( ymax === null || data.mag[ pos ] > ymax ) ymax = data.mag[ pos ];
    }
    options.series.push( {
        color : color       ,
        data  : series_data ,
        name  : filter      ,
        type  : "scatter"   ,
        zIndex : 1000,
        showInLegend : true,
    } );
    options.series.push( {
        color : color       ,
        data  : series_error,
        enableMouseTracking : false,
        lineWidth : 2,
        name  : filter      ,
        type  : "errorbar"  ,
        whiskerLength : 0,
    } );
}

options.yAxis.min = ymin - 0.1;
options.yAxis.max = ymax + 0.1;

$( "#photometry-plot" ).highcharts( options );

// Stamps.

var stamp_data = [];
for( var i = 0; i < data.mjd.length; i++ ) {

    var stamps = data.stamps[ i ];
    if( ! stamps ) continue;

    var band = data.band[ i ];
    var mag  = data.mag[ i ];
    var dmag = data.mag_error[ i ];
    var snr  = data.snr[ i ];
    var mjd  = data.mjd[ i ];

    var utc = new Date( ( mjd - 40587.0 ) * 86400000.0 );
    var utc_year  = utc.getUTCFullYear();
    var utc_month = utc.getUTCMonth() + 1;
    var utc_day   = utc.getUTCDate() + ( utc.getUTCHours() * 60.0 + utc.getUTCMinutes() ) / 1440.0;
    utc_month = utc_month < 10 ? "0" + utc_month : utc_month;
    utc_day   = utc_day   < 10 ? "0" + utc_day.toFixed( 2 ) : utc_day.toFixed( 2 );

    stamp_data.push( {
        mjd  : mjd,
        utc  : utc_year + "-" + utc_month + "-" + utc_day,
        mag  : mag.toFixed( 2 ),
        dmag : dmag.toFixed( 2 ),
        snr  : snr.toFixed( 1 ),
        band : band,
        srch : stamps.replace( "https", "http" ).replace( "REPLACE", "srch" ),
        temp : stamps.replace( "https", "http" ).replace( "REPLACE", "temp" ),
        diff : stamps.replace( "https", "http" ).replace( "REPLACE", "diff" ),
    } );

}

stamp_data.sort( function( a, b ) {
    return a.mjd - b.mjd;                    
} );

var start = stamp_data[ 0 ].mjd;
for( var i = 0; i < stamp_data.length; i++ ) {
    stamp_data[ i ].day = Math.round( stamp_data[ i ].mjd - start );
}

var stamp_map = {};
for( var i = 0; i < stamp_data.length; i++ ) {
    var entry = stamp_data[ i ];
    if( ! ( entry.day in stamp_map ) ) stamp_map[ entry.day ] = {};
    for( var j = 0; j < bands.length; j++ ) {
        var band   = bands[ j ];
        var filter = band.filter;
        if( ! ( filter in stamp_map[ entry.day ] ) ) stamp_map[ entry.day ][ filter ] = null;
        if( entry.band == filter ) stamp_map[ entry.day ][ filter ] = entry;
    }
}

var stamp_days = [];
for( var key in stamp_map ) {
    if( stamp_map.hasOwnProperty( key ) ) stamp_days.push( key );
}
stamp_days.sort( function( a, b ) {
    return a - b;
} );

var html = "";
for( var i = 0; i < stamp_days.length; i++ ) {
    html += "<div class='col-md-12'><div class=row>";
    for( var j = 0; j < bands.length; j++ ) {
        var band   = bands[ j ];
        var filter = band.filter;
        var color  = band.color;
        var entry  = stamp_map[ stamp_days[ i ] ][ filter ];
        html += "<div class='col-lg-3 col-md-3 col-sm-3'>";
        html += "<div class=display style='color: " + color + ";'>";
        if( entry ) {
            html += "<div class='display-header'><small>";
            html += entry.utc + " &bull; " + entry.mjd.toFixed( 2 );
            html += "</small></div>";
            html += "<div class='display-body'>";
            html += "<img src='" + entry.srch + "' width=60 height=60'>";
            html += "<img src='" + entry.temp + "' width=60 height=60'>";
            html += "<img src='" + entry.diff + "' width=60 height=60'>";
            html += "</div>";
            html += "<div class='display-footer'><small>";
            html += filter + " = " + entry.mag + " &plusmn " + entry.dmag + " &bull; ";
            html += "S/N = " + entry.snr;
            html += "</small></div>";
        }
        html += "</div>";
        html += "</div>";
    }
    html += "</div>";
    html += "</div>";
}

$( "#stamps_display" ).html( html );

</script>

        
    </body>

</html>